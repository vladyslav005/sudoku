<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta content="width=device-width, initial-scale=1" name="viewport">

    <link crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
          integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" rel="stylesheet">
    <link href="/static/css/mycss.css" rel="stylesheet">
    <script src="/static/js/bootstrap.js"></script>
    <script crossorigin="anonymous"
            integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
            src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">

    <link rel="icon" href="../static/assets/Iconarchive-Realistic-Illustration-Fruit-Blueberry-Illustration.32.png">
<!--    <link rel="icon" href="../static/assets/wrmx.png">-->

    <script crossorigin="anonymous"
            integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
            src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"></script>
    <script crossorigin="anonymous"
            integrity="sha384-0pUGZvbkm6XF6gxjEnlmuGrJXVbNuzT9qBBavbLwCsOGabYfZo0T0to5eqruptLy"
            src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js"></script>

    <title>Sudoku</title>
<body>

<div class="container">

    <div bis_skin_checked="1" class="container">
        <header class="d-flex flex-wrap justify-content-center py-3 mb-4 border-bottom">
            <a class="d-flex align-items-center mb-3 mb-md-0 me-md-auto text-dark text-decoration-none" href="/">
                <svg class="bi me-2" height="32" width="40">
                    <use xlink:href="#bootstrap"></use>
                </svg>
                <span class="fs-4">SUDOKU</span>
            </a>

            <ul class="nav nav-pills ">

                <li class="nav-item">
                    <a class="nav-link" href="#"
                       onclick="{
                        if (document.getElementById('four').style.display === 'block') return

                        document.getElementById('nine').style.display = 'none'
                        document.getElementById('four').style.display = 'block'
                        document.querySelectorAll('.input-form input[type=\'number\']')
                              .forEach((input) => {
                                input.value = '';
                              })
                              let error = document.getElementById('error-output')
                              error.innerHTML = '<h1 class=\'card-title\'>Errors</h1>\n'
                        DATA = undefined
                        STEP_IDX = 0
                    }"
                    >
                        4x4
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#"
                       onclick="{
                            if (document.getElementById('nine').style.display === 'block') return
                            document.getElementById('nine').style.display = 'block'
                            document.getElementById('four').style.display = 'none'
                            document.querySelectorAll('.input-form input[type=\'number\']')
                              .forEach((input) => {
                                input.value = '';
                              })
                              let error = document.getElementById('error-output')
                              error.innerHTML = '<h1 class=\'card-title\'>Errors</h1>\n'
                            DATA = undefined
                            STEP_IDX = 0
                        }"
                    >
                        9x9
                    </a>
                </li>

                <li>
                    <div class="btn-group">
                        <button aria-expanded="false" aria-haspopup="true"
                                class="btn btn-primary dropdown-toggle" data-toggle="dropdown" type="button">
                            Paste Example
                        </button>
                        <div class="dropdown-menu">
                            <a class="dropdown-item" href="#" id="9x9example-1">9x9 1</a>
                            <a class="dropdown-item" href="#" id="9x9example-2">9x9 2</a>
                            <a class="dropdown-item" href="#" id="9x9example-3">9x9 3</a>
                            <a class="dropdown-item" href="#" id="9x9example-4">9x9 4</a>
                            <a class="dropdown-item" href="#" id="9x9example-5">9x9 5</a>

                            <div class="dropdown-divider"></div>

                            <a class="dropdown-item" href="#" id="4x4example-1">4x4 1</a>
                            <a class="dropdown-item" href="#" id="4x4example-2">4x4 2</a>
                            <a class="dropdown-item" href="#" id="4x4example-3">4x4 3</a>
                            <a class="dropdown-item" href="#" id="4x4example-4">4x4 4</a>
                            <a class="dropdown-item" href="#" id="4x4example-5">4x4 5</a>

                        </div>
                    </div>
                </li>

                <li class="nav-item">
                    <a aria-current="page" class=" btn btn-secondary mx-2" href="#"
                       onclick="{
                              document.querySelectorAll('.input-form input[type=\'number\']')
                              .forEach((input) => {
                                input.value = '';
                              })
                              let error = document.getElementById('error-output')
                              error.innerHTML = '<h1 class=\'card-title\'>Errors</h1>\n'
                              DATA = undefined
                              STEP_IDX = 0
                               document.getElementById('current_step').textContent = '0'
                        document.getElementById('steps').textContent = ''
                        document.getElementById('time').textContent = ''
                        document.getElementById('solved').textContent = ''

                        }"
                    >
                        Clear
                    </a>
                </li>

            </ul>
        </header>
    </div>

    <div class="content d-flex flex-row">

        <div class="forms ">
            <form class="container input-form" id="nine">
                <div class="d-flex flex-row">
                    <div class="border border-primary">
                        <div class="d-flex flex-row">
                            <input aria-label="default input example" class="form-control m-1" placeholder=""
                                   type="number">
                            <input aria-label="default input example" class="form-control m-1" placeholder=""
                                   type="number">
                            <input aria-label="default input example" class="form-control m-1" placeholder=""
                                   type="number">
                        </div>
                        <div class="d-flex flex-row">
                            <input aria-label="default input example" class="form-control m-1" placeholder=""
                                   type="number">
                            <input aria-label="default input example" class="form-control m-1" placeholder=""
                                   type="number">
                            <input aria-label="default input example" class="form-control m-1" placeholder=""
                                   type="number">
                        </div>
                        <div class="d-flex flex-row">
                            <input aria-label="default input example" class="form-control m-1" placeholder=""
                                   type="number">
                            <input aria-label="default input example" class="form-control m-1" placeholder=""
                                   type="number">
                            <input aria-label="default input example" class="form-control m-1" placeholder=""
                                   type="number">
                        </div>
                    </div>

                    <div class="border border-primary">
                        <div class="d-flex flex-row">
                            <input aria-label="default input example" class="form-control m-1" placeholder=""
                                   type="number">
                            <input aria-label="default input example" class="form-control m-1" placeholder=""
                                   type="number">
                            <input aria-label="default input example" class="form-control m-1" placeholder=""
                                   type="number">
                        </div>
                        <div class="d-flex flex-row">
                            <input aria-label="default input example" class="form-control m-1" placeholder=""
                                   type="number">
                            <input aria-label="default input example" class="form-control m-1" placeholder=""
                                   type="number">
                            <input aria-label="default input example" class="form-control m-1" placeholder=""
                                   type="number">
                        </div>
                        <div class="d-flex flex-row">
                            <input aria-label="default input example" class="form-control m-1" placeholder=""
                                   type="number">
                            <input aria-label="default input example" class="form-control m-1" placeholder=""
                                   type="number">
                            <input aria-label="default input example" class="form-control m-1" placeholder=""
                                   type="number">
                        </div>
                    </div>

                    <div class="border border-primary">
                        <div class="d-flex flex-row">
                            <input aria-label="default input example" class="form-control m-1" placeholder=""
                                   type="number">
                            <input aria-label="default input example" class="form-control m-1" placeholder=""
                                   type="number">
                            <input aria-label="default input example" class="form-control m-1" placeholder=""
                                   type="number">
                        </div>
                        <div class="d-flex flex-row">
                            <input aria-label="default input example" class="form-control m-1" placeholder=""
                                   type="number">
                            <input aria-label="default input example" class="form-control m-1" placeholder=""
                                   type="number">
                            <input aria-label="default input example" class="form-control m-1" placeholder=""
                                   type="number">
                        </div>
                        <div class="d-flex flex-row">
                            <input aria-label="default input example" class="form-control m-1" placeholder=""
                                   type="number">
                            <input aria-label="default input example" class="form-control m-1" placeholder=""
                                   type="number">
                            <input aria-label="default input example" class="form-control m-1" placeholder=""
                                   type="number">
                        </div>
                    </div>

                </div>
                <div class="d-flex flex-row">
                    <div class="border border-primary">
                        <div class="d-flex flex-row">
                            <input aria-label="default input example" class="form-control m-1" placeholder=""
                                   type="number">
                            <input aria-label="default input example" class="form-control m-1" placeholder=""
                                   type="number">
                            <input aria-label="default input example" class="form-control m-1" placeholder=""
                                   type="number">
                        </div>
                        <div class="d-flex flex-row">
                            <input aria-label="default input example" class="form-control m-1" placeholder=""
                                   type="number">
                            <input aria-label="default input example" class="form-control m-1" placeholder=""
                                   type="number">
                            <input aria-label="default input example" class="form-control m-1" placeholder=""
                                   type="number">
                        </div>
                        <div class="d-flex flex-row">
                            <input aria-label="default input example" class="form-control m-1" placeholder=""
                                   type="number">
                            <input aria-label="default input example" class="form-control m-1" placeholder=""
                                   type="number">
                            <input aria-label="default input example" class="form-control m-1" placeholder=""
                                   type="number">
                        </div>
                    </div>

                    <div class="border border-primary">
                        <div class="d-flex flex-row">
                            <input aria-label="default input example" class="form-control m-1" placeholder=""
                                   type="number">
                            <input aria-label="default input example" class="form-control m-1" placeholder=""
                                   type="number">
                            <input aria-label="default input example" class="form-control m-1" placeholder=""
                                   type="number">
                        </div>
                        <div class="d-flex flex-row">
                            <input aria-label="default input example" class="form-control m-1" placeholder=""
                                   type="number">
                            <input aria-label="default input example" class="form-control m-1" placeholder=""
                                   type="number">
                            <input aria-label="default input example" class="form-control m-1" placeholder=""
                                   type="number">
                        </div>
                        <div class="d-flex flex-row">
                            <input aria-label="default input example" class="form-control m-1" placeholder=""
                                   type="number">
                            <input aria-label="default input example" class="form-control m-1" placeholder=""
                                   type="number">
                            <input aria-label="default input example" class="form-control m-1" placeholder=""
                                   type="number">
                        </div>
                    </div>

                    <div class="border border-primary">
                        <div class="d-flex flex-row">
                            <input aria-label="default input example" class="form-control m-1" placeholder=""
                                   type="number">
                            <input aria-label="default input example" class="form-control m-1" placeholder=""
                                   type="number">
                            <input aria-label="default input example" class="form-control m-1" placeholder=""
                                   type="number">
                        </div>
                        <div class="d-flex flex-row">
                            <input aria-label="default input example" class="form-control m-1" placeholder=""
                                   type="number">
                            <input aria-label="default input example" class="form-control m-1" placeholder=""
                                   type="number">
                            <input aria-label="default input example" class="form-control m-1" placeholder=""
                                   type="number">
                        </div>
                        <div class="d-flex flex-row">
                            <input aria-label="default input example" class="form-control m-1" placeholder=""
                                   type="number">
                            <input aria-label="default input example" class="form-control m-1" placeholder=""
                                   type="number">
                            <input aria-label="default input example" class="form-control m-1" placeholder=""
                                   type="number">
                        </div>
                    </div>

                </div>
                <div class="d-flex flex-row">
                    <div class="border border-primary">
                        <div class="d-flex flex-row">
                            <input aria-label="default input example" class="form-control m-1" placeholder=""
                                   type="number">
                            <input aria-label="default input example" class="form-control m-1" placeholder=""
                                   type="number">
                            <input aria-label="default input example" class="form-control m-1" placeholder=""
                                   type="number">
                        </div>
                        <div class="d-flex flex-row">
                            <input aria-label="default input example" class="form-control m-1" placeholder=""
                                   type="number">
                            <input aria-label="default input example" class="form-control m-1" placeholder=""
                                   type="number">
                            <input aria-label="default input example" class="form-control m-1" placeholder=""
                                   type="number">
                        </div>
                        <div class="d-flex flex-row">
                            <input aria-label="default input example" class="form-control m-1" placeholder=""
                                   type="number">
                            <input aria-label="default input example" class="form-control m-1" placeholder=""
                                   type="number">
                            <input aria-label="default input example" class="form-control m-1" placeholder=""
                                   type="number">
                        </div>
                    </div>

                    <div class="border border-primary">
                        <div class="d-flex flex-row">
                            <input aria-label="default input example" class="form-control m-1" placeholder=""
                                   type="number">
                            <input aria-label="default input example" class="form-control m-1" placeholder=""
                                   type="number">
                            <input aria-label="default input example" class="form-control m-1" placeholder=""
                                   type="number">
                        </div>
                        <div class="d-flex flex-row">
                            <input aria-label="default input example" class="form-control m-1" placeholder=""
                                   type="number">
                            <input aria-label="default input example" class="form-control m-1" placeholder=""
                                   type="number">
                            <input aria-label="default input example" class="form-control m-1" placeholder=""
                                   type="number">
                        </div>
                        <div class="d-flex flex-row">
                            <input aria-label="default input example" class="form-control m-1" placeholder=""
                                   type="number">
                            <input aria-label="default input example" class="form-control m-1" placeholder=""
                                   type="number">
                            <input aria-label="default input example" class="form-control m-1" placeholder=""
                                   type="number">
                        </div>
                    </div>

                    <div class="border border-primary">
                        <div class="d-flex flex-row">
                            <input aria-label="default input example" class="form-control m-1" placeholder=""
                                   type="number">
                            <input aria-label="default input example" class="form-control m-1" placeholder=""
                                   type="number">
                            <input aria-label="default input example" class="form-control m-1" placeholder=""
                                   type="number">
                        </div>
                        <div class="d-flex flex-row">
                            <input aria-label="default input example" class="form-control m-1" placeholder=""
                                   type="number">
                            <input aria-label="default input example" class="form-control m-1" placeholder=""
                                   type="number">
                            <input aria-label="default input example" class="form-control m-1" placeholder=""
                                   type="number">
                        </div>
                        <div class="d-flex flex-row">
                            <input aria-label="default input example" class="form-control m-1" placeholder=""
                                   type="number">
                            <input aria-label="default input example" class="form-control m-1" placeholder=""
                                   type="number">
                            <input aria-label="default input example" class="form-control m-1" placeholder=""
                                   type="number">
                        </div>
                    </div>

                </div>

                <div class="d-flex flex-row my-3 justify-content-between w-100" id="control9x9">
                    <div class=" btn btn-primary mx-2 w-100" id="start9x9"> <<</div>
                    <div class="btn btn-primary mx-2 w-100" id="backward9x9"> <</div>

                    <div class="btn btn-primary mx-2 w-100" id="forward9x9"> ></div>
                    <div class="btn btn-primary mx-2 w-100" id="end9x9"> >></div>


                </div>
                <div class="d-flex flex-row my-3 justify-content-between w-100">
                    <div class="btn btn-primary mx-2 w-100 " id="play-stop9x9"> Play/Stop</div>
                </div>
                <button class="btn btn-primary w-100 submit" type="button">Submit</button>


            </form>

            <form class="input-form container" id="four">
                <div class="d-flex flex-row">
                    <div class="border border-primary">
                        <div class="d-flex flex-row">
                            <input aria-label="default input example" class="form-control m-1" placeholder=""
                                   type="number">
                            <input aria-label="default input example" class="form-control m-1" placeholder=""
                                   type="number">
                        </div>
                        <div class="d-flex flex-row">
                            <input aria-label="default input example" class="form-control m-1" placeholder=""
                                   type="number">
                            <input aria-label="default input example" class="form-control m-1" placeholder=""
                                   type="number">
                        </div>

                    </div>

                    <div class="border border-primary">
                        <div class="d-flex flex-row">
                            <input aria-label="default input example" class="form-control m-1" placeholder=""
                                   type="number">
                            <input aria-label="default input example" class="form-control m-1" placeholder=""
                                   type="number">
                        </div>
                        <div class="d-flex flex-row">
                            <input aria-label="default input example" class="form-control m-1" placeholder=""
                                   type="number">
                            <input aria-label="default input example" class="form-control m-1" placeholder=""
                                   type="number">
                        </div>

                    </div>

                </div>
                <div class="d-flex flex-row">
                    <div class="border border-primary">
                        <div class="d-flex flex-row">
                            <input aria-label="default input example" class="form-control m-1" placeholder=""
                                   type="number">
                            <input aria-label="default input example" class="form-control m-1" placeholder=""
                                   type="number">
                        </div>
                        <div class="d-flex flex-row">
                            <input aria-label="default input example" class="form-control m-1" placeholder=""
                                   type="number">
                            <input aria-label="default input example" class="form-control m-1" placeholder=""
                                   type="number">
                        </div>

                    </div>

                    <div class="border border-primary">
                        <div class="d-flex flex-row">
                            <input aria-label="default input example" class="form-control m-1" placeholder=""
                                   type="number">
                            <input aria-label="default input example" class="form-control m-1" placeholder=""
                                   type="number">
                        </div>
                        <div class="d-flex flex-row">
                            <input aria-label="default input example" class="form-control m-1" placeholder=""
                                   type="number">
                            <input aria-label="default input example" class="form-control m-1" placeholder=""
                                   type="number">
                        </div>
                    </div>
                </div>

                <div class="d-flex flex-row my-3 justify-content-between w-100" id="control4x4">
                    <div class=" btn btn-primary mx-1 w-100" id="start4x4"> <<</div>
                    <div class="btn btn-primary mx-1 w-100" id="backward4x4"> <</div>

                    <div class="btn btn-primary mx-1 w-100" id="forward4x4"> ></div>
                    <div class="btn btn-primary mx-1 w-100" id="end4x4"> >></div>


                </div>
                <div class="d-flex flex-row my-3 justify-content-between w-100">
                    <div class="btn btn-primary mx-2 w-100 " id="play-stop4x4"> Play/Stop</div>
                </div>
                <button class="btn btn-primary submit w-100  my-1" type="button">Submit</button>

            </form>

        </div>

        <div class="sidebar d-flex flex-column gap-5">

            <div class="card err-card">

                <div class="card-body text-center" id="error-output">
                    <h1 class="card-title">Errors</h1>

                    <!--                    <p id="err-msg"> Error message</p>-->
                </div>
            </div>


            <div class="card">
                <div class="card-body text-center" id="method-choosing">
                    <h3 class="card-title">Choose method</h3>

                    <div class="card-body">
                        <div class="form-check text-start">
                            <input class="form-check-input" id="flexRadioDefault2" name="flexRadioDefault" type="radio">
                            <label class="form-check-label" for="flexRadioDefault2">
                                DFS
                            </label>
                        </div>
                        <div class="form-check text-start">
                            <input checked class="form-check-input" id="flexRadioDefault1" name="flexRadioDefault"
                                   type="radio">
                            <label class="form-check-label" for="flexRadioDefault1">
                                Backtracking
                            </label>
                        </div>
                        <div class="form-check text-start">
                            <input class="form-check-input" id="flexRadioDefault3" name="flexRadioDefault" type="radio">
                            <label class="form-check-label" for="flexRadioDefault3">
                                Forward control
                            </label>
                        </div>
                    </div>
                </div>
            </div>

            <div class="card">
                <div class="card-body text-center">
                    <h3 class="card-title">Stats</h3>

                    <div class="card-body p-1 text-start">
                        <p class="my-1 text-nowrap">Time (s): <span id="time"></span></p>
                        <p class="my-1">Solved: <span id="solved"></span></p>
                        <p class="my-1">Count of steps: <span id="steps"></span></p>
                        <p class="my-1">Current step: <span id="current_step">0</span></p>
                        <div class="form-outline" data-mdb-input-init style="width: 10rem;">
                            <input class="form-control" id="delay" max="20" min="10" placeholder="Delay, ms"
                                   type="number"/>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="loading">
    <div class="loading-bx">
        <h3>Loading...</h3>
    </div>

</div>


</body>

<footer>
    <ul class="nav justify-content-center border-bottom pb-3 mb-3">
        <li class="nav-item"><a class="nav-link px-2 text-muted" href="#">TUKE ></a></li>
        <li class="nav-item"><a class="nav-link px-2 text-muted" href="#">FEI ></a></li>
        <li class="nav-item"><a class="nav-link px-2 text-muted" href="#">KPI ></a></li>
        <li class="nav-item"><a class="nav-link px-2 text-muted" href="#">ISI ></a></li>
        <li class="nav-item"><a class="nav-link px-2 text-muted" href="#">SUDOKU</a></li>
    </ul>
    <p class="text-center text-muted">© 2024 Company, Inc</p>

    <script>
        STEP_IDX = 0

        window.addEventListener("click", () => {
            document.getElementById("current_step").textContent = STEP_IDX
        })

        window.addEventListener("wheel", () => {
            document.getElementById("current_step").textContent = STEP_IDX
        })

        document.getElementById("control9x9").addEventListener("wheel", (e) => {
            e.preventDefault()
            if (DATA === undefined) return;

            if (e.deltaY > 0) {
                play - stop9x9
                if (STEP_IDX > 0)
                    STEP_IDX--;
                pasteExampleTo9x9(DATA.states[STEP_IDX])
            } else if (e.deltaY < 0) {
                if (STEP_IDX < DATA.states.length - 1)
                    STEP_IDX++;
                pasteExampleTo9x9(DATA.states[STEP_IDX])
            }
        })

        document.getElementById("control4x4").addEventListener("wheel", (e) => {
            e.preventDefault()
            if (DATA === undefined) return;

            if (e.deltaY > 0) {
                if (STEP_IDX > 0)
                    STEP_IDX--;
                pasteExampleTo4x4(DATA.states[STEP_IDX])
            } else if (e.deltaY < 0) {
                if (STEP_IDX < DATA.states.length - 1)
                    STEP_IDX++;
                pasteExampleTo4x4(DATA.states[STEP_IDX])
            }
        })


        document.getElementById("start9x9").addEventListener("click", () => {
            if (DATA === undefined) return;
            STEP_IDX = 0
            pasteExampleTo9x9(DATA.states[STEP_IDX])
        })

        document.getElementById("backward9x9").addEventListener("click", () => {
            if (DATA === undefined) return;
            if (STEP_IDX > 0)
                STEP_IDX--;
            pasteExampleTo9x9(DATA.states[STEP_IDX])
        })

        document.getElementById("forward9x9").addEventListener("click", () => {
            if (DATA === undefined) return;
            if (STEP_IDX < DATA.states.length - 1)
                STEP_IDX++;
            pasteExampleTo9x9(DATA.states[STEP_IDX])
        })

        document.getElementById("end9x9").addEventListener("click", () => {
            if (DATA === undefined) return;
            STEP_IDX = DATA.states.length - 1
            pasteExampleTo9x9(DATA.states[STEP_IDX])
        })


        IS_PLAY = false;
        intervalId = undefined;

        document.getElementById("play-stop9x9").addEventListener("click", () => {

            if (DATA === undefined) return;
            let value = parseInt(document.getElementById("delay").value)

            let delay = 50

            if (!isNaN(value) && value > 0) {
                delay = value
            }
            if (IS_PLAY) {
                clearInterval(intervalId);
                intervalId = undefined;
                IS_PLAY = false;
                return;
            }


            IS_PLAY = true;
            intervalId = setInterval(() => {
                if (STEP_IDX < DATA.states.length - 1) {
                    STEP_IDX++;
                } else {
                    clearInterval(intervalId);
                    intervalId = undefined;
                    IS_PLAY = false;
                }
                pasteExampleTo9x9(DATA.states[STEP_IDX]);
                document.getElementById("current_step").textContent = STEP_IDX;
            }, delay);
        });


        document.getElementById("play-stop4x4").addEventListener("click", () => {

            if (DATA === undefined) return;
            let value = parseInt(document.getElementById("delay").value)

            let delay = 50

            if (!isNaN(value) && value > 0) {
                delay = value
            }
            if (IS_PLAY) {
                clearInterval(intervalId);
                intervalId = undefined;
                IS_PLAY = false;
                return;
            }


            IS_PLAY = true;
            intervalId = setInterval(() => {
                if (STEP_IDX < DATA.states.length - 1) {
                    STEP_IDX++;
                } else {
                    clearInterval(intervalId);
                    intervalId = undefined;
                    IS_PLAY = false;
                }
                pasteExampleTo4x4(DATA.states[STEP_IDX]);
                document.getElementById("current_step").textContent = STEP_IDX;
            }, delay);
        });


        document.getElementById("start4x4").addEventListener("click", () => {
            if (DATA === undefined) return;
            STEP_IDX = 0
            pasteExampleTo4x4(DATA.states[STEP_IDX])
        })

        document.getElementById("backward4x4").addEventListener("click", () => {
            if (DATA === undefined) return;
            if (STEP_IDX > 0)
                STEP_IDX--;
            pasteExampleTo4x4(DATA.states[STEP_IDX])
        })

        document.getElementById("forward4x4").addEventListener("click", () => {
            if (DATA === undefined) return;
            if (STEP_IDX < DATA.states.length - 1)
                STEP_IDX++;
            pasteExampleTo4x4(DATA.states[STEP_IDX])
        })

        document.getElementById("end4x4").addEventListener("click", () => {
            if (DATA === undefined) return;
            STEP_IDX = DATA.states.length - 1
            pasteExampleTo4x4(DATA.states[STEP_IDX])
        })

    </script>

    <script>

        DATA = undefined

        function pasteExampleTo9x9(valuesArray) {
            let formInputs = document.querySelectorAll("#nine input[type='number']");
            for (let i = 0; i < 81; i++) {
                let input = formInputs[i];
                input.value = valuesArray[i];
            }
        }

        function pasteExampleTo4x4(valuesArray) {
            let formInputs = document.querySelectorAll("#four input[type='number']");
            for (let i = 0; i < 16; i++) {
                let input = formInputs[i];
                input.value = valuesArray[i];
            }
        }


        // Example 1
        document.getElementById("9x9example-1").addEventListener("click", () => {
            pasteExampleTo9x9([
                "", "5", "3", "", "9", "2", "8", "", "7",
                "", "", "", "", "3", "6", "9", "", "",
                "", "9", "", "", "", "", "", "", "",
                "", "2", "4", "", "", "1", "3", "6", "",
                "", "", "3", "", "", "9", "", "1", "4",
                "", "5", "", "6", "4", "3", "8", "", "",
                "", "", "9", "4", "7", "8", "2", "", "6",
                "3", "", "", "", "9", "2", "4", "7", "",
                "4", "", "2", "3", "", "5", "9", "1", ""
            ]);
        });
        document.getElementById("9x9example-2").addEventListener("click", () => {
            pasteExampleTo9x9([
                "", "3", "", "2", "1", "", "5", "", "",
                "2", "5", "7", "", "", "", "", "9", "",
                "9", "4", "1", "8", "7", "5", "2", "", "",
                "", "7", "", "9", "6", "2", "", "8", "",
                "", "", "1", "5", "7", "3", "4", "", "9",
                "", "2", "9", "", "", "8", "", "", "",
                "6", "2", "8", "", "", "", "", "5", "",
                "9", "", "", "7", "4", "", "8", "3", "2",
                "7", "", "", "", "", "", "", "9", "6",
            ]);
        });
        document.getElementById("9x9example-3").addEventListener("click", () => {
            pasteExampleTo9x9([
                "7", "6", "", "5", "", "1", "3", "2", "8",
                "", "8", "", "", "3", "", "5", "9", "",
                "", "", "5", "8", "2", "", "6", "4", "7",
                "", "8", "6", "", "", "", "1", "", "",
                "", "1", "4", "", "5", "", "2", "", "3",
                "", "5", "", "7", "", "", "9", "8", "",
                "2", "1", "", "", "", "4", "", "9", "5",
                "", "7", "", "3", "2", "9", "", "", "6",
                "4", "9", "6", "5", "", "", "", "7", "2"
            ]);
        });
        document.getElementById("9x9example-4").addEventListener("click", () => {
            pasteExampleTo9x9([
                "5", "", "", "", "", "", "", "3", "",
                "", "9", "8", "3", "4", "2", "6", "", "",
                "", "", "6", "", "", "5", "", "", "",
                "", "", "", "3", "", "2", "6", "7", "8",
                "", "8", "", "", "", "9", "5", "", "",
                "5", "", "", "6", "8", "4", "1", "", "9",
                "9", "", "", "2", "", "", "", "4", "5",
                "", "", "1", "", "5", "3", "", "", "7",
                "", "", "8", "4", "", "", "", "9", "3",
            ]);
        });
        document.getElementById("9x9example-5").addEventListener("click", () => {
            pasteExampleTo9x9([
                "", "3", "9", "4", "7", "8", "", "", "2",
                "7", "6", "", "", "5", "", "8", "", "",
                "4", "", "5", "1", "2", "6", "", "", "7",
                "", "6", "", "5", "", "", "9", "", "3",
                "", "", "7", "4", "2", "9", "6", "", "",
                "5", "9", "", "", "6", "8", "7", "", "4",
                "", "", "1", "", "4", "5", "7", "9", "6",
                "", "", "6", "1", "", "8", "2", "3", "",
                "", "", "9", "", "7", "", "8", "5", "",


            ]);
        });

        document.getElementById("4x4example-1").addEventListener("click", () => {
            pasteExampleTo4x4([
                "", "3", "4", "",
                "4", "", "", "2",
                "1", "", "", "2",
                "", "3", "1", "",
            ]);
        });
        document.getElementById("4x4example-2").addEventListener("click", () => {
            pasteExampleTo4x4([
                "", "", "4", "",
                "4", "", "3", "",
                "", "4", "", "1",
                "", "", "", "3",
            ]);
        });
        document.getElementById("4x4example-3").addEventListener("click", () => {
            pasteExampleTo4x4([
                "", "", "4", "",
                "1", "", "", "",
                "", "", "3", "",
                "", "2", "", "",
            ]);
        });
        document.getElementById("4x4example-4").addEventListener("click", () => {
            pasteExampleTo4x4([
                "2", "", "", "",
                "", "", "3", "",
                "", "4", "", "",
                "", "", "", "1",
            ]);
        });
        document.getElementById("4x4example-5").addEventListener("click", () => {
            pasteExampleTo4x4([
                "1", "", "", "",
                "4", "", "", "",
                "", "", "", "1",
                "", "", "", "2",
            ]);
        });

    </script>


    <script>

        function getSelectedRadioValue() {
            let radios = document.getElementsByName('flexRadioDefault');

            for (let i = 0; i < radios.length; i++) {
                if (radios[i].checked) {
                    return radios[i].nextElementSibling.textContent.trim(); // Returns the label text
                }
            }
            return null;
        }


        function setError(msg) {
            let error = document.getElementById("error-output")
            error.innerHTML = "<h1 class=\"card-title\">Errors</h1>\n"

            let errorMsg = document.createElement("p")

            errorMsg.setAttribute("class", "err-msg")

            errorMsg.textContent = msg

            error.appendChild(errorMsg)
        }

        function checkSquares(input) {
            if (input.length === 81) {
                for (let j = 0; j < 9; j++) {
                    let hash = {
                        1: 0,
                        2: 0,
                        3: 0,
                        4: 0,
                        5: 0,
                        6: 0,
                        7: 0,
                        8: 0,
                        9: 0
                    }

                    for (let i = j * 9; i < j * 9 + 9; i++) {
                        if (input[i] !== "") {
                            let key = parseInt(input[i])
                            hash[key] = hash[key] + 1
                            if (hash[key] > 1) {
                                setError("Invalid input! Square: " + (j + 1))
                                throw new Error("Invalid input! Square: " + (j + 1));
                                return;
                            }
                        }
                    }
                }

            } else {
                for (let j = 0; j < 9; j++) {
                    let hash = {
                        1: 0,
                        2: 0,
                        3: 0,
                        4: 0,
                    }

                    for (let i = j * 4; i < j * 4 + 4; i++) {
                        if (input[i] !== "") {
                            let key = parseInt(input[i])
                            hash[key] = hash[key] + 1
                            if (hash[key] > 1) {
                                setError("Invalid input! Square: " + (j + 1))
                                throw new Error("Invalid input! Square: " + (j + 1));
                                return;
                            }
                        }
                    }
                }
            }

            let error = document.getElementById("error-output")
            error.innerHTML = "<h1 class=\"card-title\">Errors</h1>\n"

        }


        function convertToMatrix(input) {
            if (input.length === 81) {
                let arr = [0, 3, 6, 27, 30, 33, 54, 57, 60]

                let rows = new Array(9);
                for (let i = 0; i < rows.length; i++) {
                    rows[i] = new Array(9);
                }

                let index = 0;
                for (let i = 0; i < arr.length; i++) {
                    rows[index] = [input[arr[i]], input[arr[i] + 1], input[arr[i] + 2], input[arr[i] + 9], input[arr[i] + 10], input[arr[i] + 11], input[arr[i] + 18], input[arr[i] + 19], input[arr[i] + 20]]
                    index += 1
                }
                return rows;
            } else {
                let arr = [0, 2, 8, 10]

                let rows = new Array(4);
                for (let i = 0; i < rows.length; i++) {
                    rows[i] = new Array(4);
                }

                let index = 0;
                for (let i = 0; i < arr.length; i++) {
                    rows[index] = [input[arr[i]], input[arr[i] + 1], input[arr[i] + 4], input[arr[i] + 5]]
                    index += 1
                }
                return rows;
            }
        }

        function checkRows(input) {

            if (input.length === 81) {
                let rows = convertToMatrix(input)
                for (let j = 0; j < 9; j++) {
                    let hash = {
                        1: 0,
                        2: 0,
                        3: 0,
                        4: 0,
                        5: 0,
                        6: 0,
                        7: 0,
                        8: 0,
                        9: 0
                    }


                    for (let i = 0; i < 9; i++) {
                        let key = parseInt(rows[j][i]);
                        hash[key] += 1
                        if (hash[key] > 1) {
                            setError("Invalid input! Row: " + (j + 1))
                            throw new Error("Invalid input! Row: " + (j + 1));
                        }
                    }
                }
            } else {
                let rows = convertToMatrix(input)
                for (let j = 0; j < 4; j++) {
                    let hash = {
                        1: 0,
                        2: 0,
                        3: 0,
                        4: 0,
                    }


                    for (let i = 0; i < 4; i++) {
                        let key = parseInt(rows[j][i]);
                        hash[key] += 1
                        if (hash[key] > 1) {
                            setError("Invalid input! Row: " + (j + 1))
                            throw new Error("Invalid input! Row: " + (j + 1));
                        }
                    }
                }
            }
            // console.log(rows)

            let error = document.getElementById("error-output")
            error.innerHTML = "<h1 class=\"card-title\">Errors</h1>\n"
        }

        function checkColumns(input) {
            console.log(convertToMatrix(input))
            if (input.length === 81) {
                let rows = convertToMatrix(input)
                for (let j = 0; j < 9; j++) {
                    let hash = {
                        1: 0,
                        2: 0,
                        3: 0,
                        4: 0,
                        5: 0,
                        6: 0,
                        7: 0,
                        8: 0,
                        9: 0
                    }

                    for (let i = 0; i < 9; i++) {
                        let key = parseInt(rows[i][j]);
                        hash[key] += 1
                        if (hash[key] > 1) {
                            setError("Invalid input! Col: " + (j + 1))
                            throw new Error("Invalid input! Col: " + (j + 1));
                        }
                    }
                }
            } else {
                let rows = convertToMatrix(input)
                for (let j = 0; j < 4; j++) {
                    let hash = {
                        1: 0,
                        2: 0,
                        3: 0,
                        4: 0,
                    }


                    for (let i = 0; i < 4; i++) {
                        let key = parseInt(rows[i][j]);
                        hash[key] += 1
                        if (hash[key] > 1) {
                            setError("Invalid input! Col: " + (i + 1))
                            throw new Error("Invalid input! Col: " + (i + 1));
                        }
                    }
                }
            }
            // console.log(rows)

            let error = document.getElementById("error-output")
            error.innerHTML = "<h1 class=\"card-title\">Errors</h1>\n"
        }


        function validateInput() {
            let formInputs = undefined
            if (document.getElementById('nine').style.display !== 'none') {
                formInputs = document.querySelectorAll("#nine input[type='number']");
            } else {
                formInputs = document.querySelectorAll("#four input[type='number']");
            }

            const data = Array.from(formInputs).map(input => input.value); // Collect values in an array


            checkSquares(data)
            checkRows(data)
            checkColumns(data)

        }


        document.querySelectorAll(".submit").forEach(btn => {
            btn.addEventListener("click", function (event) {
                event.preventDefault();  // Prevents form from submitting

                let formInputs = undefined;

                if (document.getElementById('nine').style.display !== 'none') {
                    formInputs = document.querySelectorAll("#nine input[type='number']");
                } else {
                    formInputs = document.querySelectorAll("#four input[type='number']");
                }

                const data = Array.from(formInputs).map(input => input.value); // Collect values in an array

                const postData = {values: data, method: getSelectedRadioValue()};

                const loadingBx = document.getElementById("loading")
                loadingBx.style.display = 'flex'
                fetch("/solve", {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json"
                    },
                    body: JSON.stringify(postData)
                })
                    .then(response => {

                        loadingBx.style.display = 'none'

                        if (!response.ok) {
                            throw new Error("Network response was not ok " + response.statusText);
                        }
                        return response.json();
                    })
                    .then(data => {

                        console.log("Success:", data);
                        DATA = data
                        STEP_IDX = 0
                        document.getElementById("current_step").textContent = "0"
                        document.getElementById("steps").textContent = data.steps
                        document.getElementById("time").textContent = data.time_elapsed
                        document.getElementById("solved").textContent = data.solvable

                    })
                    .catch(error => {
                        DATA = undefined
                        STEP_IDX = 0
                        document.getElementById("current_step").textContent = "0"
                        document.getElementById("steps").textContent = ""
                        document.getElementById("time").textContent = ""
                        document.getElementById("solved").textContent = ""

                        console.error("Error:", error);
                    });
            })
        });


        let inputs = document.querySelectorAll("#nine input[type='number']");
        inputs.forEach(input => {
            input.addEventListener("wheel", (e) => {
                e.preventDefault()
                let currentValue = input.value ? parseInt(input.value) : 0

                if (e.deltaY < 0 && currentValue !== 9) {
                    input.value = currentValue + 1;
                } else if (e.deltaY > 0 && currentValue !== 0) {
                    if (currentValue === 1)
                        input.value = null
                    else
                        input.value = currentValue - 1;
                }
                validateInput()
            });
            input.addEventListener("keydown", (e) => {
                e.preventDefault();
            });
        }, {passive: true});


        inputs = document.querySelectorAll("#four input[type='number']");
        inputs.forEach(input => {
            input.addEventListener("wheel", (e) => {
                e.preventDefault()
                let currentValue = input.value ? parseInt(input.value) : 0

                if (e.deltaY < 0 && currentValue !== 4) {
                    input.value = currentValue + 1;
                } else if (e.deltaY > 0 && currentValue !== 0) {
                    if (currentValue === 1)
                        input.value = null
                    else
                        input.value = currentValue - 1;
                }
                validateInput()
            });
            input.addEventListener("keydown", (e) => {
                e.preventDefault();
            });
        }, {passive: true});


        document.getElementById('nine').style.display = 'block'
        document.getElementById('four').style.display = 'none'
    </script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
</footer>

</html>